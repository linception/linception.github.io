<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Docker 方式安装 Elasticsearch</title>
    <url>/2021/02/11/Java/Docker%20%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85%20Elasticsearch/</url>
    <content><![CDATA[<h1 id="Docker-方式安装-Elasticsearch"><a href="#Docker-方式安装-Elasticsearch" class="headerlink" title="Docker 方式安装 Elasticsearch"></a>Docker 方式安装 Elasticsearch</h1><p>版本兼容：<a href="https://www.elastic.co/cn/support/matrix#matrix_compatibility">https://www.elastic.co/cn/support/matrix#matrix_compatibility</a></p>
<h2 id="安装-Elasticsearch"><a href="#安装-Elasticsearch" class="headerlink" title="安装 Elasticsearch"></a>安装 Elasticsearch</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull elasticsearch:7.6.2</span><br><span class="line">docker run -d --name es -p 9200:9200 -p 9300:9300 -e <span class="string">&quot;discovery.type=single-node&quot;</span> elasticsearch:7.6.2</span><br></pre></td></tr></table></figure>
<p>访问：<a href="http://localhost:9200/">http://localhost:9200</a></p>
<h3 id="允许跨域"><a href="#允许跨域" class="headerlink" title="允许跨域"></a>允许跨域</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">docker</span> <span class="string">exec</span> <span class="string">-it</span> <span class="string">es</span> <span class="string">/bin/bash</span></span><br><span class="line"><span class="string">cd</span> <span class="string">config</span></span><br><span class="line"><span class="string">vi</span> <span class="string">elasticsearch.yml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置</span></span><br><span class="line"><span class="attr">http.cors.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">http.cors.allow-origin:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line"><span class="string">docker</span> <span class="string">restart</span> <span class="string">es</span></span><br></pre></td></tr></table></figure>
<h2 id="安装-Elasticsearch-Head"><a href="#安装-Elasticsearch-Head" class="headerlink" title="安装 Elasticsearch Head"></a>安装 Elasticsearch Head</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull mobzelasticsearch-head:5</span><br><span class="line">docker run -d --name es-head -p 9100:9100 docker.io/mobz/elasticsearch-head:5</span><br></pre></td></tr></table></figure>
<p>访问：<a href="http://localhost:9100/">http://localhost:9100</a></p>
<blockquote>
<p>需要允许 Elasticsearch 跨域</p>
</blockquote>
<h3 id="406-错误"><a href="#406-错误" class="headerlink" title="406 错误"></a>406 错误</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it es-head /bin/bash</span><br><span class="line"><span class="comment"># 没有vi，拷贝出来改</span></span><br><span class="line">docker cp es-head:/usr/src/app/_site/vendor.js /tmp/vendor.js</span><br><span class="line">vi /tmp/vendor.js</span><br><span class="line"><span class="comment"># x-www-form-urlencoded 替换为 json;charset=UTF-8</span></span><br><span class="line">:s/x-www-form-urlencoded/json;charset=UTF-8/g</span><br><span class="line"><span class="comment"># 拷贝回去</span></span><br><span class="line">docker cp /tmp/vendor.js es-head:/usr/src/app/_site/vendor.js</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">docker restart es-head</span><br></pre></td></tr></table></figure>
<h2 id="安装-Kibana"><a href="#安装-Kibana" class="headerlink" title="安装 Kibana"></a>安装 Kibana</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull kibana:7.6.2</span><br><span class="line">docker run -d --name kibana --link es:elasticsearch -p 5601:5601 kibana:7.6.2</span><br></pre></td></tr></table></figure>
<p>访问：<a href="http://localhost:5601/">http://localhost:5601</a></p>
<h3 id="配置中文"><a href="#配置中文" class="headerlink" title="配置中文"></a>配置中文</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it kibana /bin/bash</span><br><span class="line"><span class="built_in">cd</span> config</span><br><span class="line">vi kibana.yml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加</span></span><br><span class="line">i18n.locale: <span class="string">&quot;zh-CN&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">docker restart kibana</span><br></pre></td></tr></table></figure>
<h2 id="安装-IK-分词器"><a href="#安装-IK-分词器" class="headerlink" title="安装 IK 分词器"></a>安装 IK 分词器</h2><p>github 地址：<a href="https://github.com/medcl/elasticsearch-analysis-ik">https://github.com/medcl/elasticsearch-analysis-ik</a></p>
<h3 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it es /bin/bash</span><br><span class="line"><span class="built_in">cd</span> plugins</span><br><span class="line">elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.2/elasticsearch-analysis-ik-7.6.2.zip</span><br><span class="line">docker restart es</span><br></pre></td></tr></table></figure>
<h3 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> plugins &amp;&amp; mkdir ik &amp;&amp; <span class="built_in">cd</span> ik</span><br><span class="line">curl -LJO https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.2/elasticsearch-analysis-ik-7.6.2.zip</span><br><span class="line"><span class="comment"># 加速 curl -LJO https://hub.fastgit.org/medcl/elasticsearch-analysis-ik/releases/download/v7.6.2/elasticsearch-analysis-ik-7.6.2.zip</span></span><br><span class="line">unzip elasticsearch-analysis-ik-7.6.2.zip</span><br></pre></td></tr></table></figure>
<h3 id="添加字典"><a href="#添加字典" class="headerlink" title="添加字典"></a>添加字典</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#docker exec -it -e LANG=C.UTF-8 es /bin/bash</span></span><br><span class="line">docker <span class="built_in">exec</span> -it es /bin/bash</span><br><span class="line"><span class="comment"># elasticsearch-plugin 方式安装配置文件在</span></span><br><span class="line"><span class="built_in">cd</span> config/analysis-ik</span><br><span class="line"><span class="comment"># 手动解压配置文件在</span></span><br><span class="line"><span class="built_in">cd</span> plugins/ik/config</span><br><span class="line"><span class="comment"># 中文乱码不管，也可以添加成功</span></span><br><span class="line">vi my.dic</span><br><span class="line">vi IKAnalyzer.cfg.xml</span><br><span class="line"><span class="comment"># 添加</span></span><br><span class="line">&lt;entry key=<span class="string">&quot;ext_dict&quot;</span>&gt;my.dic&lt;/entry&gt;</span><br><span class="line">docker restart es</span><br></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">GET _analyze</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_smart&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;黎小荣&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>分词方式：有 <code>ik_smart</code> 和 <code>ik_max_word</code> 两种</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://www.cnblogs.com/adawoo/p/12455265.html">docker安装elasticsearch和kibana</a></li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/2021/02/20/%E5%89%8D%E7%AB%AF/AJAX/</url>
    <content><![CDATA[<h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><p>AJAX 是异步的 JavaScript 和 XML（<strong>A</strong>synchronous <strong>J</strong>avaScript <strong>A</strong>nd <strong>X</strong>ML）。简单点说，就是使用 <code>XMLHttpRequest</code> 对象与服务器通信。</p>
<h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Old compatibility code, no longer needed.</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123; <span class="comment">// Mozilla, Safari, IE7+ ...</span></span><br><span class="line">    httpRequest = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.ActiveXObject) &#123; <span class="comment">// IE 6 and older</span></span><br><span class="line">    httpRequest = <span class="keyword">new</span> ActiveXObject(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><p><a href="https://developer.mozilla.org/zh-cn/docs/web/api/xmlhttprequest">XMLHttpRequest</a></p>
</li>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/AJAX/Getting_Started#%E4%BB%80%E4%B9%88%E6%98%AFajax%EF%BC%9F">什么是AJAX？</a></p>
</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>JavaScript 总结</title>
    <url>/2021/02/19/%E5%89%8D%E7%AB%AF/JavaScript%20%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<h1 id="JavaScript-总结"><a href="#JavaScript-总结" class="headerlink" title="JavaScript 总结"></a>JavaScript 总结</h1><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li>《JavaScript 高级程序设计（第4版）》<a href="%E6%BA%90%E7%A0%81%E5%9C%B0%E5%9D%80%EF%BC%9Ahttps://www.ituring.com.cn/book/2472">^1</a></li>
</ul>
<h2 id="js-的加载"><a href="#js-的加载" class="headerlink" title="js 的加载"></a>js 的加载</h2><h3 id="defer-和-async-的区别"><a href="#defer-和-async-的区别" class="headerlink" title="defer 和 async 的区别"></a><code>defer</code> 和 <code>async</code> 的区别</h3><ul>
<li><code>defer</code> 保证顺序，<code>async</code> 无序</li>
<li><code>defer</code> 保证在 <code>DOMContentLoaded</code> 事件前加载完毕</li>
</ul>
<p><img src="https://gitee.com/sharonlee/images/raw/master/20210220233046.png"></p>
<p>参考：</p>
<ul>
<li><a href="https://segmentfault.com/q/1010000000640869">defer和async的区别</a></li>
</ul>
<h3 id="动态加载"><a href="#动态加载" class="headerlink" title="动态加载"></a>动态加载</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">&#x27;script&#x27;</span>); </span><br><span class="line">script.src = <span class="string">&#x27;gibberish.js&#x27;</span>; </span><br><span class="line">script.async = <span class="literal">false</span>; </span><br><span class="line"><span class="built_in">document</span>.head.appendChild(script);</span><br></pre></td></tr></table></figure>
<h2 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h2><h3 id="var-与-let"><a href="#var-与-let" class="headerlink" title="var 与 let"></a><code>var</code> 与 <code>let</code></h3><ul>
<li><code>var</code> 存在作用域提升，<code>let</code> 没有</li>
<li><code>var</code> 可以重复声明，<code>let</code> 不能</li>
<li><code>var</code> 为函数作用域，<code>let</code> 为块作用域</li>
<li>全局作用域中声明时，<code>var</code> 会成为 <code>window</code> 的属性，<code>let</code> 不会</li>
</ul>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a><code>const</code></h3><p><code>const</code> 类似 <code>let</code>，声明时必须赋值，当然不可修改</p>
<h3 id="for-循环中的-var-与-let"><a href="#for-循环中的-var-与-let" class="headerlink" title="for 循环中的 var 与 let"></a><code>for</code> 循环中的 <code>var</code> 与 <code>let</code></h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">	<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(i), <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出：5 5 5 5 5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">	<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(i), <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出：0 1 2 3 4</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>我的理解：</strong>因为 lambda 表达式会对 <code>let</code> 记录一个当时的值，<code>var</code> 只会记录这个变量</p>
</blockquote>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>有 6 种简单类型（也称原始类型）：</p>
<ul>
<li>Undefined：只有一个值 <code>undefined</code></li>
<li>Null：只有一个值 <code>null</code></li>
<li>Boolean：只有 <code>true</code> 和 <code>false</code></li>
<li>Number</li>
<li>String</li>
<li>Symbol</li>
</ul>
<p>1 种复杂数据类型：</p>
<ul>
<li>Object</li>
</ul>
<h3 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a><code>typeof</code></h3><ul>
<li><p><code>null</code> 认为是空对象，所以 <code>typeof(null)</code> 返回 <code>object</code>，其他都返回对应小写开头的数据类型</p>
</li>
<li><p>另外函数严格来讲是 Object，但是会返回 <code>function</code></p>
</li>
<li><p><code>typeof</code> 声明未赋值和<strong>未声明</strong>的变量都返回 <code>undefined</code></p>
</li>
</ul>
<h3 id="undefined-和-null"><a href="#undefined-和-null" class="headerlink" title="undefined 和 null"></a><code>undefined</code> 和 <code>null</code></h3><p><code>undefined</code> 是 <code>null</code> 派生来的，所以 <code>undefined == null</code> 为 <code>true</code></p>
<h3 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h3><p><strong>转换规则：</strong></p>
<p><img src="https://gitee.com/sharonlee/images/raw/master/image-20210221012000316.png" alt="image-20210221012000316"></p>
<h3 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h3><p><strong>转换规则：</strong></p>
<p><img src="https://gitee.com/sharonlee/images/raw/master/image-20210221013656546.png" alt="image-20210221013656546"></p>
<h3 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h3><h2 id="标签函数"><a href="#标签函数" class="headerlink" title="标签函数"></a>标签函数</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ret = tagFun<span class="string">`<span class="subst">$&#123;a&#125;</span> + <span class="subst">$&#123;b&#125;</span> = <span class="subst">$&#123;a + b&#125;</span>`</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tagFun</span>(<span class="params">strings, ...expressions</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// strings 为 $&#123;&#125; 分割的字符串数组</span></span><br><span class="line">  <span class="comment">// expressions 为 $&#123;&#125; 中的每个表达式的值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>用标签函数实现不用标签函数拼接字符串的功能：</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">noTag</span>(<span class="params">strings, ...expressions</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">return</span> strings[<span class="number">0</span>] + expressions.map(<span class="function">(<span class="params">e, i</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;e&#125;</span><span class="subst">$&#123;strings[i + <span class="number">1</span>]&#125;</span>`</span>).join(<span class="string">&#x27;&#x27;</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a>操作符</h2>]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>bind call apply</title>
    <url>/2021/02/17/%E5%89%8D%E7%AB%AF/bind%20call%20apply/</url>
    <content><![CDATA[<h1 id="bind-call-apply"><a href="#bind-call-apply" class="headerlink" title="bind call apply"></a>bind call apply</h1><p>只有函数对象 <code>Function.prototype</code> 才有的方法</p>
<h2 id="bind"><a href="#bind" class="headerlink" title="bind()"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind"><code>bind()</code></a></h2><p><code>bind()</code> 方法创建一个新的函数，在 <code>bind()</code> 被调用时，这个新函数的 <code>this</code> 被指定为 <code>bind()</code> 的第一个参数，而其余参数将作为新函数的参数，供调用时使用。</p>
<p><strong>语法：</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>.bind(thisArg[, arg1[, arg2[, ...]]])</span><br></pre></td></tr></table></figure>
<p><strong>返回值：</strong></p>
<p>返回一个原函数的拷贝，并拥有指定的 <strong><code>this</code></strong> 值和初始参数。</p>
<h2 id="call"><a href="#call" class="headerlink" title="call()"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call"><code>call()</code></a></h2><p><code>call()</code> 方法使用一个指定的 <code>this</code> 值和单独给出的一个或多个参数来调用一个函数。</p>
<blockquote>
<p><strong>注意：</strong>该方法的语法和作用与 <code>apply()</code> 方法类似，只有一个区别，就是 <code>call()</code> 方法接受的是<strong>一个参数列表</strong>，而 <code>apply()</code> 方法接受的是<strong>一个包含多个参数的数组</strong>。</p>
</blockquote>
<p><strong>语法：</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>.call(thisArg, arg1, arg2, ...)</span><br></pre></td></tr></table></figure>
<h2 id="apply"><a href="#apply" class="headerlink" title="apply()"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply"><code>apply()</code></a></h2><p><strong><code>apply()</code></strong> 方法调用一个具有给定<code>this</code>值的函数，以及以一个数组（或<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Indexed_collections#Working_with_array-like_objects">类数组对象</a>）的形式提供的参数。</p>
<blockquote>
<p><strong>注意：</strong><code>call()</code> 方法的作用和 <code>apply()</code> 方法类似，区别就是<code>call()</code>方法接受的是<strong>参数列表</strong>，而<code>apply()</code>方法接受的是<strong>一个参数数组</strong>。</p>
</blockquote>
<p><strong>语法：</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span>.apply(thisArg, [argsArray])</span><br></pre></td></tr></table></figure>
<h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><ul>
<li><code>call()</code> 和 <code>apply()</code> 就传参方式不一样，似乎没有本质区别</li>
<li><code>bind()</code> 感觉是对 <code>call()</code> 的加强，可以缓存 <code>this</code>，后续再调用</li>
</ul>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="伪数组转换为数组"><a href="#伪数组转换为数组" class="headerlink" title="伪数组转换为数组"></a>伪数组转换为数组</h3><p>可以通过 <code>Array.prototype.slice.call(likeArray)</code> 将伪数组转换为数组，其中伪数组是：</p>
<ul>
<li>能通过下标访问元素 <code>likeArray[i]</code></li>
<li>有 <code>length</code> 属性</li>
</ul>
<p>比如 <code>DOM</code>、<code>arguments</code>、<code>&#123;0: &#39;foo&#39;, length: 1&#125;</code> 等</p>
<blockquote>
<p>原理是大致是因为 <code>splice</code> 会新建一个数组，然后遍历 <code>push</code></p>
</blockquote>
<h3 id="获取对象类型"><a href="#获取对象类型" class="headerlink" title="获取对象类型"></a>获取对象类型</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">type</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="用于继承"><a href="#用于继承" class="headerlink" title="用于继承"></a>用于继承</h3><h2 id="手动实现-call-和-apply"><a href="#手动实现-call-和-apply" class="headerlink" title="手动实现 call() 和 apply()"></a>手动实现 <code>call()</code> 和 <code>apply()</code></h2><p>临时构造一个对象，让 <code>call()</code> 和传入的参数都在里面，这时候调用 <code>call()</code>，<code>this</code> 指针不就指向被调用的参数了</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 赋值作用域参数，如果没有则默认为 window，即访问全局作用域对象</span></span><br><span class="line">    context = context || <span class="built_in">window</span>    </span><br><span class="line">    <span class="comment">// 绑定调用函数（.call之前的方法即this，前面提到过调用call方法会调用一遍自身，所以这里要存下来）</span></span><br><span class="line">    context.invokFn = <span class="built_in">this</span>    </span><br><span class="line">    <span class="comment">// 截取作用域对象参数后面的参数</span></span><br><span class="line">    <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">    <span class="comment">// 执行调用函数，记录拿取返回值</span></span><br><span class="line">    <span class="keyword">let</span> result = context.invokFn(...args)</span><br><span class="line">    <span class="comment">// 销毁调用函数，以免作用域污染</span></span><br><span class="line">    <span class="built_in">Reflect</span>.deleteProperty(context, <span class="string">&#x27;invokFn&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 赋值作用域参数，如果没有则默认为 window，即访问全局作用域对象</span></span><br><span class="line">    context = context || <span class="built_in">window</span></span><br><span class="line">    <span class="comment">// 绑定调用函数（.call之前的方法即this，前面提到过调用call方法会调用一遍自身，所以这里要存下来）</span></span><br><span class="line">    context.invokFn = <span class="built_in">this</span></span><br><span class="line">    <span class="comment">// 执行调用函数，需要对是否有参数做判断，记录拿取返回值</span></span><br><span class="line">    <span class="keyword">let</span> result</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>[<span class="number">1</span>]) &#123;</span><br><span class="line">        result = context.invokFn(...arguments[<span class="number">1</span>])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        result = context.invokFn()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 销毁调用函数，以免作用域污染</span></span><br><span class="line">    <span class="built_in">Reflect</span>.deleteProperty(context, <span class="string">&#x27;invokFn&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="手动实现-bind"><a href="#手动实现-bind" class="headerlink" title="手动实现 bind()"></a>手动实现 <code>bind()</code></h2><blockquote>
<p><strong>TODO</strong></p>
</blockquote>
<h2 id="体会"><a href="#体会" class="headerlink" title="体会"></a>体会</h2><p><strong>关于面向对象：</strong></p>
<p><code>this</code> 指针其实是面向对象的概念，比如 Java。把定义的函数和数据圈起来，把这个圈叫类，函数叫方法，数据叫属性，再弄个继承关系，把属性隐藏起来，整个动态函数调用，就叫面向对象了。其中 <code>this</code> 指针就永远指向整个类的实例，不能改变。</p>
<p>JavaScript 是基于对象的语言，它也是有面向对象的思想在里面，但是没有限制整个圈里的东西，甚至根本没有圈，<code>this</code> 也想指向谁就指向谁，你可以自己画圈去实现面向对象的大部分功能，也可以随时跳出圈外，为所欲为。</p>
<p><strong>关于实现原理：</strong></p>
<p>刨根问底式的学习不一定可取和切合实际，但是，虽然我不去看原理，可能没时间、没必要或水平不够，但是不要把这些都看成黑盒，代码都是一行一行敲出来的，即便再底层的东西，它也是实实在在的代码，最多不过0和1，不要求我弄懂所有源码，但是基本的思想还是可以去查一些相关资料了解一下的，了解了基本原理学起来才事半功倍，甚至不学胜有学，因为你无非就是那样去实现的。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference">JavaScript 参考</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/Shd-Study/p/6560808.html">javascript中call()、apply()、bind()的用法终于理解</a></p>
</li>
<li><p><a href="https://juejin.cn/post/6844903567967387656">让你弄懂 call、apply、bind的应用和区别</a></p>
</li>
<li><p><a href="https://www.zhihu.com/question/20289071/answer/93261557">如何理解和熟练运用 JS 中的 call 及 apply？</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/zhazhanitian/p/11400898.html">call、apply、bind的原理剖析及实现</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>前端</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 使用</title>
    <url>/2021/02/10/%E6%8A%80%E6%9C%AF/Hexo%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="Hexo-使用"><a href="#Hexo-使用" class="headerlink" title="Hexo 使用"></a>Hexo 使用</h1><p>官方文档：<a href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></p>
<h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line">hexo init [folder]</span><br><span class="line"><span class="built_in">cd</span> [folder]</span><br><span class="line">npm install</span><br><span class="line"><span class="comment"># 生成文档</span></span><br><span class="line">hexo g</span><br><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>访问：<a href="http://localhost:4000/">http://localhost:4000</a></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 初始化</span></span><br><span class="line">hexo init [folder]</span><br><span class="line"><span class="comment"># 生成</span></span><br><span class="line">hexo g|generate</span><br><span class="line"><span class="comment"># 启动服务</span></span><br><span class="line">hexo s|server</span><br><span class="line"><span class="comment"># 发布</span></span><br><span class="line">hexo d|deploy</span><br><span class="line"><span class="comment"># 清除</span></span><br><span class="line">hexo clean</span><br></pre></td></tr></table></figure>
<h2 id="基本设置"><a href="#基本设置" class="headerlink" title="基本设置"></a>基本设置</h2><p>配置文件为 <code>_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 博客标题</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;SharonLee&#x27;s Blog&quot;</span></span><br><span class="line"><span class="comment"># 副标题</span></span><br><span class="line"><span class="attr">subtitle:</span> </span><br><span class="line"><span class="comment">#网站描述</span></span><br><span class="line"><span class="attr">description:</span> </span><br><span class="line"><span class="comment">#作者昵称</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">SharonLee</span></span><br><span class="line"><span class="comment"># 设置语言</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="comment"># 时区</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置主题</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure>
<h2 id="发布到-Git"><a href="#发布到-Git" class="headerlink" title="发布到 Git"></a>发布到 Git</h2><p>安装依赖：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&lt;repository</span> <span class="string">url&gt;</span></span><br><span class="line">  <span class="attr">branch:</span> [<span class="string">branch</span>]</span><br></pre></td></tr></table></figure>
<h2 id="NexT-主题"><a href="#NexT-主题" class="headerlink" title="NexT 主题"></a>NexT 主题</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>github 地址：<a href="https://github.com/theme-next/hexo-theme-next">https://github.com/theme-next/hexo-theme-next</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next <span class="comment"># 删除 .git 文件夹</span></span><br><span class="line"><span class="comment"># 或者下载解压到相应目录</span></span><br></pre></td></tr></table></figure>
<p><code>_config.yml</code> 中配置主题</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure>
<h3 id="常用配置"><a href="#常用配置" class="headerlink" title="常用配置"></a>常用配置</h3><p><code>next/_config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 字体小一点</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">  	<span class="attr">size:</span> <span class="number">0.8</span></span><br><span class="line">  	</span><br><span class="line"><span class="comment"># 样式</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 展开所有目录</span></span><br><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">expand_all:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="开启分类、标签和关于"><a href="#开启分类、标签和关于" class="headerlink" title="开启分类、标签和关于"></a>开启分类、标签和关于</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page tags</span><br><span class="line">hexo new page categories</span><br><span class="line">hexo new page about</span><br></pre></td></tr></table></figure>
<p><code>source/xxx/index.md</code> 中分别添加</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">type:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">about</span></span><br></pre></td></tr></table></figure>
<p>配置 <code>next/_config.yml</code>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">th</span></span><br></pre></td></tr></table></figure>
<h3 id="开启搜索"><a href="#开启搜索" class="headerlink" title="开启搜索"></a>开启搜索</h3><p>安装依赖：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<p>配置 <code>next/_config.yml</code>：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="文章头"><a href="#文章头" class="headerlink" title="文章头"></a>文章头</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">tag:</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">category:</span> <span class="string">分类</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">描述</span> <span class="comment"># 有描述则首页显示描述，否则显示全部，或者显示到 &lt;!-- more --&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="截取"><a href="#截取" class="headerlink" title="截取"></a>截取</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-excerpt --save</span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">excerpt:</span></span><br><span class="line">  <span class="attr">depth:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">excerpt_excludes:</span> []</span><br><span class="line">  <span class="attr">more_excludes:</span> []</span><br><span class="line">  <span class="attr">hideWholePostExcerpts:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="GitHub-Actions-发布"><a href="#GitHub-Actions-发布" class="headerlink" title="GitHub Actions 发布"></a>GitHub Actions 发布</h2><p><code>.github/workflows/main.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">GitHub</span> <span class="string">Pages</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 触发条件：在 push 到 master 分支后</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 任务</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build-and-deploy:</span></span><br><span class="line">    <span class="comment"># 服务器环境：最新版 Ubuntu</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="comment"># 拉取代码</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2.3.1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">persist-credentials:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 1、生成静态文件</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">&amp;&amp;</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 2、部署到 GitHub Pages</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">JamesIves/github-pages-deploy-action@4.0.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="string">gh-pages</span></span><br><span class="line">          <span class="attr">folder:</span> <span class="string">public</span></span><br><span class="line">          <span class="comment">#注意这里的 public 是仓库根目录下的 public，也就是 npm run build 生成静态资源的路径，比如有的人是 `docs/.vuepress/dist`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 3、同步到 gitee 的仓库</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Sync</span> <span class="string">to</span> <span class="string">Gitee</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">wearerequired/git-mirror-action@v1</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY</span></span><br><span class="line">          <span class="attr">SSH_PRIVATE_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_RSA_PRIVATE_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 GitHub 源仓库地址</span></span><br><span class="line">          <span class="attr">source-repo:</span> <span class="string">git@github.com:linception/linception.github.io.git</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 目标仓库地址</span></span><br><span class="line">          <span class="attr">destination-repo:</span> <span class="string">git@gitee.com:sharonlee/sharonlee.git</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 4、部署到 Gitee Pages</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">Gitee</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">yanglbme/gitee-pages-action@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 用户名</span></span><br><span class="line">          <span class="attr">gitee-username:</span> <span class="string">sharonlee</span></span><br><span class="line">          <span class="comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD</span></span><br><span class="line">          <span class="attr">gitee-password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GITEE_PASSWORD</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="comment"># 注意替换为你的 Gitee 仓库，仓库名严格区分大小写，请准确填写，否则会出错</span></span><br><span class="line">          <span class="attr">gitee-repo:</span> <span class="string">sharonlee/sharonlee</span></span><br><span class="line">          <span class="comment"># 要部署的分支，默认是 master，若是其他分支，则需要指定（指定的分支必须存在）</span></span><br><span class="line">          <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><h3 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h3><p>图片全放在 <code>source/images</code> 下，以绝对路径方式引用 <code>/images/xxx.png</code>，同时 typora <code>格式-&gt;图像-&gt;设置图片根目录</code> 设置为 <code>source</code> 目录</p>
<h3 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h3><p>设置 <code>post_asset_folder: true</code>，图片存放在 <code>filename</code> 文件夹下，这样图片会被拷贝到文件同级目录</p>
<p>再安装下面插件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br><span class="line">npm install hexo-simple-image --save</span><br><span class="line">npm install hexo-typora-image --save</span><br><span class="line">npm install hexo-image-link --save</span><br></pre></td></tr></table></figure>
<p>最简单是用预装的 <code>hexo-renderer-marked</code> 插件，直接配置</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="方式三"><a href="#方式三" class="headerlink" title="方式三"></a>方式三</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% asset_img image_name.jpg This is an image %&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>不爽的地方：</p>
<ol>
<li>必须建立一个与文件名同名的文件夹存放资源，<code>post_asset_folder</code> 设置才会拷贝</li>
<li>文件名不能有空格，不过 title 可以有，并且可以不和文件名一致</li>
</ol>
</blockquote>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><p><a href="https://hexo.io/zh-cn/docs/">官方文档</a></p>
</li>
<li><p><a href="https://hexo.io/zh-cn/docs/asset-folders.html">资源文件夹</a></p>
</li>
<li><p><a href="https://blog.csdn.net/mqdxiaoxiao/article/details/93644533">Hexo博客NexT主题下添加分类、标签、关于菜单项</a></p>
</li>
<li><p><a href="https://jishuin.proginn.com/p/763bfbd38928">GitHub Actions入门教程：自动化部署静态博客</a></p>
</li>
<li><p><a href="https://cloud.tencent.com/developer/article/1702112">hexo 图片显示问题及使用typora设置图片路径</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>数值在计算机中的表示</title>
    <url>/2021/02/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%95%B0%E5%80%BC%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%AD%E7%9A%84%E8%A1%A8%E7%A4%BA/</url>
    <content><![CDATA[<h1 id="数值在计算机中的表示"><a href="#数值在计算机中的表示" class="headerlink" title="数值在计算机中的表示"></a>数值在计算机中的表示</h1><h2 id="原码、反码、补码"><a href="#原码、反码、补码" class="headerlink" title="原码、反码、补码"></a>原码、反码、补码</h2><p><strong>原码</strong>：最高位是符号位，0为正，1为负，其余为该二进制的绝对值</p>
<p><strong>反码</strong>：原码符号位不变，其余按位取反</p>
<p><strong>补码</strong>：两种计算方式</p>
<ol>
<li>反码+1</li>
<li>右边第一个1及其右边的0不变，左边按位取反</li>
</ol>
<blockquote>
<p>计算机中都是存的补码，上面只是补码的计算方式，不是定义</p>
</blockquote>
<h3 id="补码"><a href="#补码" class="headerlink" title="补码"></a>补码</h3><p>补码的出现，就是为了把减法变成加法。怎么变呢，我们以钟表为例，一圈刻度是0到11。如果要从10点回拨到8点：</p>
<ol>
<li>一种方式是直接-2</li>
<li>另一个方式是+10</li>
</ol>
<p>10怎么来的？10其实也是回拨2，只不过是在多一圈的基础上-2，即10=12-2，这里的10就类似于2的补码。</p>
<p>计算机中的补码根本原因就是因为n位二进制溢出循环机制类似于钟表循环：</p>
<ul>
<li>减一个数m等于加上-m+2^(n+1)的正数</li>
<li>反过来，加一个数m等于加一个m-2^(n+1)的负数</li>
</ul>
<p>根据下图，加左边的数就等于减去对应的补码</p>
<p><img src="https://gitee.com/sharonlee/images/raw/master/image-20210213021329311.png" alt="image-20210213021329311"></p>
<blockquote>
<p>总结来说，补码就是2^(n+1)-m</p>
<ul>
<li>加上你的补码就是减去你</li>
<li>虽然和你背靠背，那我绕地球一圈就是和你面对面</li>
</ul>
</blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://www.imooc.com/article/16813?block_id=tuijian_wz">原码，反码，补码杂谈</a></li>
</ul>
<h2 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h2><p>IEEE（Institute of Electrical and Electronics Engineers，电气与电子工程师协会）标准浮点数表示：<code>V=(-1)^s * M * 2^E</code></p>
<ul>
<li>S：符号（Sign），0 正，1 负</li>
<li>E：阶码（Exponent），2 的 E 次幂，可能是负数</li>
<li>M：尾数（Mantissa），二进制小数，[1,2) 或 [0,1)</li>
</ul>
<p>单精度浮点数：</p>
<p><img src="https://gitee.com/sharonlee/images/raw/master/20210214002202.png"></p>
<p>双精度浮点数：</p>
<p><img src="https://gitee.com/sharonlee/images/raw/master/20210214002210.png"></p>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>根据阶码和尾数的不同，可以分为几类：</p>
<p><img src="https://gitee.com/sharonlee/images/raw/master/image-20210214002715305.png" alt="image-20210214002715305"></p>
<ul>
<li><p>规格化的值：e 不全为0和1，E=e-Bias，M=m+1</p>
<blockquote>
<p>k 位阶码，偏置（Bias）为 2^(k-1)-1</p>
<ul>
<li>单精度 k 为8，偏置为127</li>
<li>双精度 k 为 11，偏置为1023</li>
</ul>
</blockquote>
</li>
<li><p>非规格化的值：e 全为0，E=1-Bias，M=m</p>
<blockquote>
<p><strong>为什么非规格化 E=1-Bias，而不是 -Bias</strong>：因为和规则化的值平滑衔接</p>
<p><strong>为什么需要非规则化的值</strong>：</p>
<ul>
<li>因为规格化整数位始终是1，即 M&gt;=1，不能表示0。阶码和尾数全为0，分正负</li>
<li>表示非常接近0的数</li>
</ul>
</blockquote>
</li>
<li><p>无穷：e 全为1，m 全为0，分正负</p>
</li>
<li><p>NaN：e 全为1，m 不为0，是一系列值</p>
</li>
</ul>
<h3 id="参考-1"><a href="#参考-1" class="headerlink" title="参考"></a>参考</h3><ul>
<li><p><a href="https://blog.csdn.net/tercel_zhang/article/details/52537726">程序员必知之浮点数运算原理详解</a></p>
</li>
<li><p><a href="http://c.biancheng.net/view/314.html">IEEE 754浮点数标准详解</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/107106675">IEEE浮点表示</a></p>
</li>
<li><p>《深入理解计算机系统（第3版）》</p>
</li>
<li><p>《计算机科学导论（第3版）》</p>
</li>
<li><p><a href="http://www.binaryconvert.com/result_float.html">浮点在线数转二进制</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>计算机基础</category>
      </categories>
      <tags>
        <tag>计算机基础</tag>
      </tags>
  </entry>
</search>
